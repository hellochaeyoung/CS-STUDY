# Day07

# 1. 메일 서버 구축

- sendmail, dovecot 설치

![Untitled](https://user-images.githubusercontent.com/55968079/185397809-47a8f2aa-37a4-4c8b-bed6-b0c321bbed7b.png)

- [sendmail.mc](http://sendmail.mc) 파일 수정
    - vi /etc/mail/sendmail.mc

![Untitled 1](https://user-images.githubusercontent.com/55968079/185397633-ba8de109-1698-4372-9e55-23dce9f98deb.png)

![Untitled 2](https://user-images.githubusercontent.com/55968079/185397683-7e3439ff-f4f3-4757-8112-d609409fe5e7.png)

- vi /etc/mail/local-host-names
    - 사용할 도메인 이름 등록

![Untitled 3](https://user-images.githubusercontent.com/55968079/185397694-c828dddf-cb3f-4d11-b2c7-332e8d69ae2a.png)

- vi /etc/mail/access
    - IP, 도메인 등 접근 허용을 위한 설정 파일 수정 작업
    - 마지막
        - 이 아이피 영역에 있는 것들은 모두 허용하겠다는 의미!

![Untitled 4](https://user-images.githubusercontent.com/55968079/185397713-9cfa870c-206e-4033-83ab-1ff13eb6cfca.png)

- sendmail 설정 완료
    - 설정 파일 수정 및 makemap hash라는 툴을 이용해 파일을 만들어낸다.
    - < : 파일 입력 받는 명령어

![Untitled 5](https://user-images.githubusercontent.com/55968079/185397728-d7e54a29-1fc9-4e85-8037-e5dc2c3cd717.png)

- 사용자 추가
    - vi /etc/group
    - mail에 사용자 a,b를 추가해줘야 한다.

- sendmail 서버 실행
    - systemctl start sendmail
    - sendmail : 메일 보내는 서버!
    
- dovecot 설정
    - dovecot : 메일 받는 서버

![Untitled 6](https://user-images.githubusercontent.com/55968079/185397750-c8288b53-bc26-4bea-82d6-2b80d78685e8.png)

- vi /etc/dovecot/dovecot.conf
    - 24, 30번째 줄 주석 제거
- vi /etc/dovecot/conf.d/l10-auth.conf
    - 평문 인증 처리 사용해야 하기 때문에 no로 설정

![Untitled 7](https://user-images.githubusercontent.com/55968079/185397810-bfe5062b-bb0e-4e0c-b93b-2613e1e77e3f.png)

- 메일 사서함 위치 설정
    - 사용해야 하기 때문에 주석 제거

![Untitled 8](https://user-images.githubusercontent.com/55968079/185397813-1fd496e4-2972-4c8b-b5d8-2b2ebfe31466.png)

- 

![Untitled 9](https://user-images.githubusercontent.com/55968079/185397797-8d8b12ae-7b84-4c2b-a303-e429a7e9af37.png)

- dovecot 실행
    - systemctl start dovecot
- 방화벽 설정
    - firewall-cmd --permanent --add-port={25,110,143}/tcp
    

- 결과

![Untitled 10](https://user-images.githubusercontent.com/55968079/185397804-565a5bb1-1f0d-4020-a50d-d4b33c41b20a.png)

![Untitled 11](https://user-images.githubusercontent.com/55968079/185397805-22def395-7089-476c-a5ca-71ec58b4c55b.png)

# 2. 클라우드 환경에서 구축하기
